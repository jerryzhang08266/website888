<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>网站首页</title>
    
    <!-- 浏览器兼容性修复脚本 - 必须在其他脚本之前加载 -->
    <script>
        // 基础兼容性修复
        if (!window.console) {
            window.console = { log: function() {}, error: function() {}, warn: function() {}, info: function() {} };
        }
        
        // 修复IE兼容性
        if (!Array.prototype.includes) {
            Array.prototype.includes = function(searchElement) {
                return this.indexOf(searchElement) !== -1;
            };
        }
        
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function(searchString, position) {
                position = position || 0;
                return this.substr(position, searchString.length) === searchString;
            };
        }
        
        // 添加CSS变量支持检测
        var supportsCSSVariables = window.CSS && CSS.supports && CSS.supports('color', 'var(--fake-var)');
        if (!supportsCSSVariables) {
            document.documentElement.className += ' no-css-variables';
        }
    </script>
    
    <!-- 原有的预加载链接 -->
    <link rel="modulepreload" as="script" crossorigin href="/pc/_nuxt/entry.834fe740.js">
    <link rel="preload" as="style" href="/pc/_nuxt/entry.5522eb0f.css">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/error-component.ebcda496.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/blank.3397f80c.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/_plugin-vue_export-helper.a1a6add7.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/default.fcf71687.js">
    <link rel="prefetch stylesheet" href="/pc/_nuxt/default.9ebe9ad9.css">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/index.411bb0f8.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/dropdown.e188120b.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/index.f614cb9b.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/index.vue_vue_type_script_setup_true_lang.8c1aff80.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/asyncData.ac40d117.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/news.50c5a1de.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/useLockFn.f5d46391.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/index.31a46a9e.js">
    <link rel="prefetch" as="script" crossorigin href="/pc/_nuxt/_getTag.02a17137.js">
    <link rel="stylesheet" href="/pc/_nuxt/entry.5522eb0f.css">
    
    <!-- 兼容性CSS修复 -->
    <style>
        /* CSS变量fallback */
        .no-css-variables {
            --el-color-primary: #409eff;
            --el-text-color-primary: #303133;
            --el-text-color-regular: #606266;
            --el-text-color-secondary: #909399;
            --el-border-color: #dcdfe6;
            --el-bg-color: #ffffff;
            --el-bg-color-page: #f2f3f5;
            --color-white: #ffffff;
        }
        
        /* 修复flexbox兼容性 */
        .flex {
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
        }
        
        .flex-col {
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -webkit-flex-direction: column;
            -ms-flex-direction: column;
            flex-direction: column;
        }
        
        .items-center {
            -webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
        }
        
        .justify-center {
            -webkit-box-pack: center;
            -webkit-justify-content: center;
            -ms-flex-pack: center;
            justify-content: center;
        }
        
        .justify-between {
            -webkit-box-pack: justify;
            -webkit-justify-content: space-between;
            -ms-flex-pack: justify;
            justify-content: space-between;
        }
        
        /* 修复transform兼容性 */
        .transform {
            -webkit-transform: translateZ(0);
            -moz-transform: translateZ(0);
            -ms-transform: translateZ(0);
            -o-transform: translateZ(0);
            transform: translateZ(0);
        }
        
        /* 修复transition兼容性 */
        .transition {
            -webkit-transition: all 0.3s ease;
            -moz-transition: all 0.3s ease;
            -ms-transition: all 0.3s ease;
            -o-transition: all 0.3s ease;
            transition: all 0.3s ease;
        }
        
        /* 修复box-sizing */
        *, *::before, *::after {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        
        /* 加载状态样式 */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: #666;
        }
        
        .loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #409eff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 错误状态样式 */
        .error {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: #f56c6c;
            text-align: center;
            padding: 20px;
        }
        
        .error h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .error p {
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .error button {
            background: #409eff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .error button:hover {
            background: #337ecc;
        }
    </style>
</head>
<body>
    <div id="__nuxt">
        <div class="loading">正在加载中...</div>
    </div>
    
    <!-- 错误处理脚本 -->
    <script>
        // 全局错误处理
        window.addEventListener('error', function(e) {
            console.error('页面加载错误:', e.error || e.message);
            showError('页面加载失败', '请刷新页面重试');
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            console.error('未处理的Promise错误:', e.reason);
            e.preventDefault();
        });
        
        function showError(title, message) {
            const nuxtEl = document.getElementById('__nuxt');
            if (nuxtEl) {
                nuxtEl.innerHTML = `
                    <div class="error">
                        <h1>${title}</h1>
                        <p>${message}</p>
                        <button onclick="location.reload()">刷新页面</button>
                    </div>
                `;
            }
        }
        
        // 检测页面是否正常加载
        setTimeout(function() {
            const nuxtEl = document.getElementById('__nuxt');
            if (nuxtEl && nuxtEl.innerHTML.includes('正在加载中')) {
                console.warn('页面加载超时');
                showError('页面加载超时', '页面加载时间过长，请检查网络连接');
            }
        }, 10000); // 10秒超时
    </script>
    
    <!-- 原有的Nuxt配置 -->
    <script>
        window.__NUXT__=(function(a,b){
            return {
                serverRendered:false,
                config:{
                    public:{
                        version:"1.6.0",
                        apiPrefix:"\u002Fapi",
                        client:"4",
                        baseUrl:b,
                        ssr:a,
                        apiUrl:a
                    },
                    app:{
                        baseURL:b,
                        buildAssetsDir:"\u002F_nuxt\u002F",
                        cdnURL:a
                    }
                },
                data:{},
                state:{}
            }
        })("","\u002Fpc\u002F");
    </script>
    
    <!-- 主要应用脚本 -->
    <script type="module" src="/pc/_nuxt/entry.834fe740.js" crossorigin onerror="showError('脚本加载失败', '无法加载应用脚本，请检查网络连接')"></script>
    
    <!-- 兼容性检查脚本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面DOM加载完成');
            
            // 检查关键功能
            const features = {
                'Promise': typeof Promise !== 'undefined',
                'fetch': typeof fetch !== 'undefined',
                'localStorage': typeof localStorage !== 'undefined',
                'addEventListener': typeof document.addEventListener !== 'undefined',
                'querySelector': typeof document.querySelector !== 'undefined'
            };
            
            console.log('浏览器功能支持:', features);
            
            // 如果关键功能不支持，显示警告
            if (!features.Promise || !features.addEventListener) {
                console.warn('浏览器版本过低，可能影响网站功能');
            }
        });
    </script>
</body>
</html>
